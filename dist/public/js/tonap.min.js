var totalProductPrice,fullPrice,map=null,marker=null,markerJumped=!1,googleScriptLoaded=!1,products=[{}],intervalId=null,intervalStarted=!1,choosedProduct={},itemsPrice=0,shipingPrice=0,paymenthPrice=0,weight=0,boxCount=0,shippingPricePosteOffice=0,shippingMethod=0,paymentMethod=3;if(null!=localStorage.getItem("orderObject")){var getOrderObjectFromStorage=localStorage.getItem("orderObject"),orderObject=JSON.parse(getOrderObjectFromStorage);getSum()}else{orderObject=[];getSum()}var countSelect,variantId,container,itemsHolder,itemsWrapper,itemsCount,itemsNodes,orderInProgress={title:"",price:0,count:0,id:""},socket=null,timer=0,start=!0,stopIn=1e3,stopTime=0,stop=!1,timeTillStop=0;function updateItemsHolder(){}function revealProducts(){$(".productShowAllContainer > button").on("click",function(e){var t=e.currentTarget,n=$(t).find("i"),o=$(t).parent(".productShowAllContainer").find("p");setTimeout(function(){if(n.hasClass("fa-caret-down")){for(i=0;i<itemsNodes.length;i++)$(itemsNodes[i]).show("slow");n.removeClass("fa-caret-down").addClass("fa-caret-up"),o.html("Zobraziť menej")}else{for(i=0;i<itemsNodes.length;i++)i<4?$(itemsNodes[i]).show("slow"):$(itemsNodes[i]).hide("slow");n.removeClass("fa-caret-up").addClass("fa-caret-down"),o.html("Zobraziť všetky produkty")}},100)})}function goto(e){scrollIt(document.querySelector(e),600,"easeOutQuad")}function loadMap(){var e,t,n={lat:48.72601,lng:21.28979},o={center:new google.maps.LatLng(n.lat,n.lng),disableDefaultUI:!0,zoom:15,mapTypeControl:!1,fullscreenControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},r={url:window.location.origin+"/assets/images/icons/logofooter.png",scaledSize:new google.maps.Size(42,60),labelOrigin:new google.maps.Point(21,80),labelAnchor:new google.maps.Point(0,0)};marker=new google.maps.Marker({position:n,animation:google.maps.Animation.DROP,icon:r,label:{color:"#0669bb",fontWeight:"bold",fontSize:"14px",text:"Tonap s. r. o."},map:map}),map=new google.maps.Map(document.getElementById("map"),o),e=function(e){var t=JSON.parse(e),n=new google.maps.StyledMapType(t,{name:"Map"});map.mapTypes.set("styled_map",n),map.setMapTypeId("styled_map")},(t=new XMLHttpRequest).overrideMimeType("application/json"),t.open("GET",window.location.origin+"/assets/js/map.json",!0),t.onreadystatechange=function(){4==t.readyState&&"200"==t.status&&e(t.responseText)},t.send(null)}function scrollPage(){window.addEventListener("scroll",function(e){var t=window.pageYOffset;if(580<=t?intervalStarted&&(stop=start=!0,timeTillStop=(stopTime=timer+stopIn)-timer,cancelAnimationFrame(intervalId),intervalId=null):intervalStarted&&null===intervalId&&counterInterval(),950<=t&&this.document.getElementById("map")){if(null===map&&!googleScriptLoaded){var n=document.createElement("script");googleScriptLoaded=!0,n.onload=function(){},n.async=!0,n.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGuAMy2poB-W_gNCuKoKejHIh3LeyDZ_E&callback=loadMap",this.document.body.insertBefore(n,document.body.getElementsByTagName("script")[document.body.getElementsByTagName("script").length-1])}1125<=t&&marker&&map&&googleScriptLoaded&&!markerJumped&&(marker.setMap(map),markerJumped=!0)}})}function startCounter(){function e(e,t,r,i){var d=document.getElementById(e),c=r-t,n=Math.abs(Math.floor(i/c));n=Math.max(n,50);var a,l=(new Date).getTime()+i;function o(){var e=(new Date).getTime(),t=Math.max((l-e)/i,0),n=Math.round(r-t*c),o=Math.ceil(n).toLocaleString("en-EG");d.innerHTML=o,n==r&&clearInterval(a)}a=setInterval(o,n),o()}e("count-1",3297585,12e6,4e3),setTimeout(function(){e("count-2",3297585,9e6,3500)},500),setTimeout(function(){e("count-3",3297585,33e5,3e3)},1e3),setTimeout(counterInterval,4100)}function counterInterval(){intervalId=requestAnimationFrame(function e(t){t=t,start?(stopTime=t+stopIn,$(".count").each(function(e,t){var n=parseInt(t.innerHTML.replace(/,/g,""));n=(n+=1).toLocaleString("en-EG"),t.innerHTML=n}),start=!(intervalStarted=!0)):stopTime<=t&&(stop=!0),timeTillStop=stopTime-t,stop?(stop=!(start=!0),timeTillStop=stopTime=0,intervalId=requestAnimationFrame(e)):requestAnimationFrame(e)})}function getProducts(){var t=new XMLHttpRequest;t.open("GET",window.location.origin+"/product/",!0),t.onreadystatechange=function(){if(4==t.readyState&&"200"==t.status){var e=JSON.parse(t.response);fillProducts(products=e.data)}},t.send(null)}function fillProducts(e){window.location.pathname.indexOf("online-objednavka");for(var t=0;t<e.length;t++){for(var n,o=[],r=0;r<e[t].variant.length;r++)o.push(Number(e[t].variant[r].priceMin));if(n=Math.min.apply(null,o),1==e[t].category){(d=$("<div></div>").addClass("col-lg-3 col-md-6 col-12 text-center cursor-pointer")).attr("onclick","orderProduct('"+e[t]._id+"')");var i=$('<div class="prod-header"></div>').append('<h6 class="font-weight-bold">'+e[t].title+"</h6>");$('<img class="lazyload" alt="Tonap - '+e[t].title+'">').attr("data-src",e[t].imageFilesData[0].url).appendTo(d),i.appendTo(d),$("<strong></strong").text(n+" €").appendTo($("<p class='productPrice'></p>").text("od ").appendTo(d)),d.appendTo("#productKelimky")}if(2==e[t].category){(d=$("<div></div>").addClass("col-lg-3 col-md-6 col-12 text-center cursor-pointer")).attr("onclick","orderProduct('"+e[t]._id+"')");i=$('<div class="prod-header"></div>').append('<h6 class="font-weight-bold">'+e[t].title+"</h6>");$('<img class="lazyload" alt="Tonap - '+e[t].title+'">').attr("data-src",e[t].imageFilesData[0].url).appendTo(d),i.appendTo(d),$("<strong></strong").text(n+" €").appendTo($("<p class='productPrice'></p>").text("od ").appendTo(d)),$("<p></p>").text("Cena / TODO").appendTo(d),d.appendTo("#productOdberniky")}if(3==e[t].category){var d;(d=$("<div></div>").addClass("col-lg-3 col-md-6 col-12 text-center cursor-pointer")).attr("onclick","orderProduct('"+e[t]._id+"')");i=$('<div class="prod-header"></div>').append('<h6 class="font-weight-bold">'+e[t].title+"</h6>");$('<img class="lazyload" alt="Tonap - '+e[t].title+'">').attr("data-src",e[t].imageFilesData[0].url).appendTo(d),i.appendTo(d),$("<strong></strong").text(n+" €").appendTo($("<p class='productPrice'></p>").text("od ").appendTo(d)),$("<p></p>").text("Cena / TODO").appendTo(d),d.appendTo("#productSkumavky")}}for(t=0;t<itemsNodes.length;t++)t<4?$(itemsNodes[t]).show("slow"):$(itemsNodes[t]).hide("slow")}function orderProduct(e){for(var t=document.getElementById("variantsSelect"),n=0;n<products.length;n++)if(products[n]._id==e)if(document.location.href.indexOf("online-objednavka")<0){document.getElementById("navigationOrder").innerHTML="Pridať do košíka",choosedProduct=products[n],t.innerHTML="",document.getElementById("productModalMainImage").setAttribute("src",choosedProduct.imageFilesData[0].url),document.getElementById("mainTitle").innerHTML=choosedProduct.title,document.getElementById("productDescription").innerHTML=choosedProduct.description,document.getElementById("productHeight").innerHTML="Výška: "+choosedProduct.height+" mm",document.getElementById("productDepth").innerHTML="Priemer: "+choosedProduct.gauge+" mm",document.getElementById("productVolume").innerHTML="Objem: "+choosedProduct.volume+" ml",document.getElementById("productWeight").innerHTML="Váha: "+choosedProduct.weight+" g",document.getElementById("navigationOrder").setAttribute("onclick","fillOrder('"+products[n]._id+"')");for(var o=0;o<products[n].variant.length;o++){(r=document.createElement("option")).value=products[n].variant[o].title,r.text=products[n].variant[o].title,t.appendChild(r)}document.getElementById("actualPrice").innerHTML=choosedProduct.variant[0].priceMax+" € ",document.getElementById("midPrice").innerHTML=choosedProduct.variant[0].priceMed+" €",document.getElementById("lowPrice").innerHTML=choosedProduct.variant[0].priceMin+" €",refreshOrder(),getProductSum(),document.getElementById("totalProductPrice").innerHTML="Cena spolu: "+totalProductPrice+" € ",$("#productModal").modal()}else{choosedProduct=products[n],t.innerHTML="",document.getElementById("productModalMainImage").setAttribute("src",choosedProduct.imageFilesData[0].url),document.getElementById("mainTitle").innerHTML=choosedProduct.title,document.getElementById("productDescription").innerHTML=choosedProduct.description,document.getElementById("productHeight").innerHTML="Výška: "+choosedProduct.height+" mm",document.getElementById("productDepth").innerHTML="Priemer: "+choosedProduct.gauge+" mm",document.getElementById("productVolume").innerHTML="Objem: "+choosedProduct.volume+" ml",document.getElementById("productWeight").innerHTML="Váha: "+choosedProduct.weight+" g";for(o=0;o<products[n].variant.length;o++){var r;(r=document.createElement("option")).value=products[n].variant[o].title,r.text=products[n].variant[o].title,t.appendChild(r)}document.getElementById("actualPrice").innerHTML=choosedProduct.variant[0].priceMax+" € ",document.getElementById("midPrice").innerHTML=choosedProduct.variant[0].priceMed+" €",document.getElementById("lowPrice").innerHTML=choosedProduct.variant[0].priceMin+" €",refreshOrder(),getProductSum(),document.getElementById("totalProductPrice").innerHTML="Cena spolu: "+totalProductPrice+" € ",document.getElementById("editOrder").setAttribute("onclick","fillOrder('"+products[n]._id+"')"),$("#productModal").modal()}}function fillOrder(e){for(var t,n=0;n<products.length;n++)e===products[n]._id&&(t=products[n]);orderInProgress.title=document.getElementById("mainTitle").innerHTML,orderInProgress.id=e,orderInProgress.image=document.getElementById("productModalMainImage").src,orderInProgress.count=Number(document.getElementById("countSelect").value),orderInProgress.variant=document.getElementById("variantsSelect").selectedIndex,orderInProgress.variantName=document.getElementById("variantsSelect").options[document.getElementById("variantsSelect").selectedIndex].value,orderInProgress.weight=t.weight,orderInProgress.sackCount=t.variant[document.getElementById("variantsSelect").selectedIndex].sackCount,orderInProgress.boxCount=t.variant[document.getElementById("variantsSelect").selectedIndex].boxCount;var o=document.getElementById("actualPrice").innerHTML;orderInProgress.price=Number(o.replace(/€/,"")),orderInProgress.totalPrice=orderInProgress.count*orderInProgress.price,orderObject.push(orderInProgress),localStorage.setItem("orderObject",JSON.stringify(orderObject)),orderInProgress={},200<=Number(document.getElementById("countSelect").value)&&$("#productModal").modal("toggle"),getSum()}function updateDetail(){var e;document.getElementById("detailOrder").innerHTML="";for(var t=0;t<orderObject.length;t++){var n=document.createElement("button"),o=document.createElement("button"),r=document.createElement("i"),i=document.createElement("i");r.className="fas fa-trash ml-3",i.className="fas fa-pen",n.type="button",n.appendChild(r),n.setAttribute("onclick","deleteOrder("+t+");"),o.type="button",o.appendChild(i),o.setAttribute("onclick","editOrder("+t+");");var d=document.createElement("td");d.className="text-center",e=$("<tr></tr>");var c=$('<td class="border-left-0 border-right-0"></td>').appendTo(e);$("<img>").attr("src",orderObject[t].image).appendTo(c),$("<td class='font-weight-bold border-left-0'></td>").html(orderObject[t].title).appendTo(e),$("<td class='font-weight-bold'></td>").html(orderObject[t].variantName).appendTo(e),$("<td class='font-weight-bold' style='color:#4187cc;'></td>").html(orderObject[t].price+" €").appendTo(e),$('<td class="border-left-0"></td>').html('<span class="font-weight-bold">'+orderObject[t].count+" ks.</span>").appendTo(e),$("<td class='font-weight-bold' style='color:#4187cc;'></td>").html(orderObject[t].totalPrice+" €").appendTo(e),$(d).addClass("border-right-0"),$(d).append(o),$(d).append(n).appendTo(e),e.appendTo(document.getElementById("detailOrder"))}getSum(),countPostPrice()}function editOrder(e){orderProduct(orderObject[e].id),document.getElementById("editOrder").innerHTML="Zmeniť objednávku",document.getElementById("editOrder").setAttribute("onclick","updateOrder("+e+")")}function updateOrder(e){orderObject[e].title=document.getElementById("mainTitle").innerHTML,orderObject[e].count=Number(document.getElementById("countSelect").value);var t=document.getElementById("actualPrice").innerHTML;orderObject[e].price=Number(t.replace(/€/,"")),orderObject[e].variant=document.getElementById("variantsSelect").selectedIndex,orderObject[e].variantName=document.getElementById("variantsSelect").options[document.getElementById("variantsSelect").selectedIndex].value,updateDetail(),$("#productModal").modal("toggle"),localStorage.setItem("orderObject",JSON.stringify(orderObject))}function deleteOrder(e){orderObject.splice(e,1),localStorage.setItem("orderObject",JSON.stringify(orderObject)),updateDetail()}function sendOrder(){event.preventDefault();var e={};e.city=document.getElementById("companyCity").value,e.psc=document.getElementById("companyPSC").value,e.street=document.getElementById("companyAdress").value;var t={};t.city=document.getElementById("deliveryCity").value,t.psc=document.getElementById("deliveryPSC").value,t.street=document.getElementById("deliveryAdress").value;var n={};n.billingAddress=e,n.company=document.getElementById("company").value,n.deliveryAddress=t,n.name=document.getElementById("name").value,n.surname=document.getElementById("surname").value,n.email=document.getElementById("email").value,n.phone=document.getElementById("phone").value,n.ico=document.getElementById("ico").value,n.dic=document.getElementById("dic").value,n.message=document.getElementById("message").value;var o=document.getElementById("stateSelect");n.location=o.options[o.selectedIndex].value,n.products=orderObject,n.nettPrice=itemsPrice,n.shippingPrice=shipingPrice,n.paymenthPrice=paymenthPrice,n.fullPrice=itemsPrice+shipingPrice+paymenthPrice,n.shippingMethod=shippingMethod,n.paymentMethod=paymentMethod;JSON.stringify(n);console.log(n)}function sendEmail(){var e={};event.preventDefault(),e.name=document.getElementById("contactName").value,e.email=document.getElementById("contactEmail").value,e.subject=document.getElementById("contactSubject").value,e.message=document.getElementById("contactMessage").value,jsonData=JSON.stringify(e),$.ajax({type:"POST",url:window.location.origin+"/email/send",data:jsonData,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){$(document.getElementById("successEmail")).modal("show")}})}function scrollIt(e,r,i,d){var c={easeOutQuad:function(e){return e*(2-e)}},a=window.pageYOffset,l="now"in window.performance?performance.now():(new Date).getTime(),t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),n=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,o="number"==typeof e?e:e.offsetTop-90,s=Math.round(t-o<n?t-n:o);if("requestAnimationFrame"in window==!1)return window.scroll(0,s),void(d&&d());!function e(){var t="now"in window.performance?performance.now():(new Date).getTime(),n=Math.min(1,(t-l)/r),o=c[i](n);window.scroll(0,Math.ceil(o*(s-a)+a)),window.pageYOffset!==s?requestAnimationFrame(e):d&&d()}()}function refreshOrder(){countSelect=document.getElementById("countSelect").value,variantId=document.getElementById("variantsSelect").selectedIndex;var e=document.getElementById("actualPrice"),t=document.getElementById("midPrice"),n=document.getElementById("lowPrice");countSelect<2e3&&(e.innerHTML=choosedProduct.variant[variantId].priceMax+" € ",t.innerHTML=choosedProduct.variant[variantId].priceMed+" €",n.innerHTML=choosedProduct.variant[variantId].priceMin+" €"),2e3<=countSelect&&countSelect<4e3?(e.innerHTML=choosedProduct.variant[variantId].priceMed+" € ",t.innerHTML=choosedProduct.variant[variantId].priceMed+" €",n.innerHTML=choosedProduct.variant[variantId].priceMin+" €"):4e3<=countSelect&&(e.innerHTML=choosedProduct.variant[variantId].priceMin+" € ",t.innerHTML=choosedProduct.variant[variantId].priceMed+" €",n.innerHTML=choosedProduct.variant[variantId].priceMin+" €"),getProductSum(),document.getElementById("totalProductPrice").innerHTML="Cena spolu: "+totalProductPrice+" € ",getSum()}function getSum(){for(var e=0,t=0;t<orderObject.length;t++)e+=Number(parseFloat(orderObject[t].price*orderObject[t].count).toFixed(2));itemsPrice=e,null!=document.getElementById("cartPrice")&&(document.getElementById("cartPrice").innerHTML=e+" €"),null!=document.getElementById("medzisucet")&&(document.getElementById("medzisucet").innerHTML=e+" €"),null!=document.getElementById("fullPrice")&&(document.getElementById("fullPrice").innerHTML=parseFloat(itemsPrice+shipingPrice+paymenthPrice).toFixed(2)+" €");for(t=0;t<orderObject.length;t++);}function getProductSum(){var e=document.getElementById("actualPrice").innerHTML;totalProductPrice=countSelect*Number(e.replace(/€/,""))}function getShippingPrice(){shippingMethod=$("input[name=shippingMethods]:checked","#shippingMethods").value;$("input[name=radioName]:checked","#myForm").val()}function enableOtherAdress(){var e=document.getElementById("otherAdress"),t=document.getElementById("otherAdressHolder");e.checked?t.style.display="block":t.style.display="none"}function stateUpdate(){addShippingMethod("geis"),document.getElementById("geisOption").checked=!0,addPaymentPrice(),0!=document.getElementById("stateSelect").selectedIndex?(document.getElementById("postaOption").disabled=!0,document.getElementById("osobnyOdberOption").disabled=!0):(document.getElementById("postaOption").disabled=!1,document.getElementById("osobnyOdberOption").disabled=!1)}function addShippingMethod(e){var t=document.getElementById("stateSelect").selectedIndex,n=document.getElementById("geisPrice"),o=document.getElementById("dobierka");if("geis"==e){switch(t){case 0:shipingPrice=3.9,n.innerHTML="3.90 €",o.innerHTML="0.96 €",paymenthPrice=.96;break;case 1:shipingPrice=6.9,n.innerHTML="6.90 €",o.innerHTML="1.20 €",paymenthPrice=1.2;break;case 2:shipingPrice=11.9,n.innerHTML="11.90 €",o.innerHTML="2.04 €",paymenthPrice=2.04,700<itemsPrice&&(o.innerHTML="3,96 €",paymenthPrice=3.96);break;case 3:shipingPrice=8.9,n.innerHTML="8.90 €",o.innerHTML="1.86 €",paymenthPrice=1.86}shippingMethod=0}"posta"==e&&(countPostPrice(),shippingMethod=1),"osobne"==e&&(shipingPrice=0,shippingMethod=2),getSum()}function addPaymentPrice(e){"osobne"==e&&(paymenthPrice=0),getSum()}function getWeight(){for(var e=weight=0;e<orderObject.length;e++)weight+=orderObject[e].count*Number(orderObject[e].weight)}function getBoxes(){for(var e=boxCount=0;e<orderObject.length;e++)boxCount+=orderObject[e].count/Number(orderObject[e].boxCount);boxCount=Math.ceil(boxCount)}function countPostPrice(){-1<window.location.href.indexOf("online-objednavka")&&(getWeight(),postPrice=document.getElementById("postPrice"),weight<1e3&&(shippingPricePosteOffice=7.2,postPrice.innerHTML="7.20 €"),1e3<weight&&weight<=3e3?(shippingPricePosteOffice=7.8,postPrice.innerHTML="7.80 €"):3001<weight&&weight<=5e3&&(shippingPricePosteOffice=8.4,postPrice.innerHTML="8.40 €"),5001<weight&&weight<=1e4&&(shippingPricePosteOffice=9,postPrice.innerHTML="9.00 €"),10001<weight&&weight<=15e3&&(shippingPricePosteOffice=9.9,postPrice.innerHTML="9.90 €"),15001<weight&&weight<=2e4&&(shippingPricePosteOffice=10.8,postPrice.innerHTML="10.80 €"),20001<weight&&weight<=25e3&&(shippingPricePosteOffice=11.7,postPrice.innerHTML="11.70 €"),25001<weight&&weight<=3e4&&(shippingPricePosteOffice=12.8,postPrice.innerHTML="12.80 €"),30001<weight&&weight<=4e4&&(shippingPricePosteOffice=17.4,postPrice.innerHTML="17.40 €"),40001<weight&&weight<=5e4&&(shippingPricePosteOffice=21.6,postPrice.innerHTML="21.60 €"),50001<weight&&weight<=75e3&&(shippingPricePosteOffice=26.2,postPrice.innerHTML="26.20 €"),75001<weight&&weight<=1e5&&(shippingPricePosteOffice=32,postPrice.innerHTML="32.00 €"),100001<weight&&weight<=125e3&&(shippingPricePosteOffice=40.5,postPrice.innerHTML="40.50 €"),125001<weight&&weight<=15e4&&(shippingPricePosteOffice=47.5,postPrice.innerHTML="47.50 €"),150001<weight&&weight<=2e5&&(shippingPricePosteOffice=57.5,postPrice.innerHTML="57.50 €"),200001<weight&&weight<=25e4&&(shippingPricePosteOffice=69,postPrice.innerHTML="69.00 €"),3e5<=weight&&(shippingPricePosteOffice=80.5,postPrice.innerHTML="80.50 €"),document.getElementById("postaOption").checked&&(shipingPrice=shippingPricePosteOffice,getSum()))}function postChecked(){shipingPrice=shippingPricePosteOffice,getSum()}window.onload=function(){revealProducts(),scrollPage(),getProducts(),window.location.href.indexOf("online-objednavka")<0&&setTimeout(startCounter,1e3),container=$("#pills-tabContent").find(".active"),itemsHolder=container.find(".productRowContainer"),itemsWrapper=itemsHolder[0].children[0],itemsNodes=itemsWrapper.childNodes,setTimeout(function(){console.log(itemsNodes)},5e3)},"function"==typeof io&&(socket=io()),1<window.location.href.indexOf("online-objednavka")&&(updateDetail(),getWeight(),getBoxes(),addShippingMethod("geis"),countPostPrice());